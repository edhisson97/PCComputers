{% extends "paginaInicio.html" %}

{% block content %}
{% load static %}
    <!-- Slider main container -->
    <div class="swiper">
        <!-- Additional required wrapper -->
        <div class="swiper-wrapper">
            <!-- Slides -->
            {% for carru in carrusel %}
                {% if carru.imagen %}
                    <div class="swiper-slide">
                        <img class="img-carrusel" src="{{ carru.imagen.url }}" alt="Carrusel">
                    </div>
                {% endif %}
            {% endfor %}
            <!--<div class="swiper-slide"><img class="img-carrusel" src="{% static 'img/carrusel/oferta1.png' %}" ></div>
            <div class="swiper-slide"><img class="img-carrusel" src="{% static 'img/carrusel/oferta2.png' %}" ></div>-->
        </div>
        <!-- If we need pagination -->
        <div class="swiper-pagination"></div>
    
        <!-- If we need navigation buttons -->
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
    
    </div>

    <div class="oferts">
        <img class="img-ofertas" src="{% static 'img/fondo1.png' %}" alt="Ofertas">
        <div class="overlay overlay-split">
            
            <div class="content-left">
            <h1 id="oferta-titulo">üî• PRODUCTOS EN OFERTA</h1>
            <p id="oferta-texto" data-frase="{{ frase|default:''|escape }}">Conozca todos los productos en descuento de nuestra tienda.</p>
            </div>

            <div class="content-right">
            <a href="ofertas/" class="btn btn-cta">
                VER OFERTAS <i class="fa-solid fa-chevron-right"></i>
            </a>
            </div>

        </div>
    </div>


    <!--<div class="oferts">

        <div class="slide active">
            <img class="img-ofertas" src="{% static 'img/fondo1.png' %}" alt="Ofertas">
            <div class="overlay">
                <h1>PRODUCTOS EN OFERTA</h1>
                <div class="button-container">
                    <p>Conoce todos los productos en descuento de nuestra tienda</p>
                    <a href="ofertas/" class="btn">
                        OFERTAS <i class="fa-solid fa-chevron-right"></i>
                    </a>
                </div>
            </div>
        </div>

        <div class="slide">
            <img class="img-ofertas" src="{% static 'img/motivacion.png' %}" alt="Motivaci√≥n">
            <div class="overlay">
                <h1>MENSAJE DEL D√çA</h1>
                <div class="button-container">
                    <p>
                        ‚ÄúPersiste hasta que cada adversidad se convierta en una fortaleza,
                        conf√≠a en ti.‚Äù
                    </p>
                    <a href="/motivacion/" class="btn">
                        VER M√ÅS <i class="fa-solid fa-chevron-right"></i>
                    </a>
                </div>
            </div>
        </div>

    </div>-->


    <div class="categoria-section">
        <div class="categoria-title">
            <h2>Categor√≠as</h2>
        </div>
        <div class="categoria-grid">
            {% for c in categoria %}
                <div class="categoria-item">
                    <a href="productos/{{ c.id }}">
                        {% if c.imagen %}
                        <img src={{ c.imagen.url }} alt="Categor√≠a 5">
                        {% endif %}
                        <h3>{{ c.nombre }}</h3>
                    </a>
                </div>
            {% endfor %}    
        </div>
    </div>

    <script>
document.addEventListener("DOMContentLoaded", () => {
    const titulo = document.getElementById("oferta-titulo");
    const texto = document.getElementById("oferta-texto");

    // Frase que viene de la BD (puede venir vac√≠a)
    const fraseBD = texto.dataset.frase?.trim();

    // Frase final: BD o por defecto
    const fraseFinal = fraseBD && fraseBD !== ""
        ? fraseBD
        : "Persiste hasta que cada adversidad se convierta en una fortaleza, conf√≠a en ti.";

    const mensajes = [
        {
            h1: "üî• PRODUCTOS EN OFERTA",
            p: "Conozca todos los productos en descuento de nuestra tienda."
        },
        {
            h1: "üåü FRASE DEL D√çA",
            p: fraseFinal
        }
    ];

    let indice = 0;

    setInterval(() => {
        // Desvanecer (respeta tus transiciones)
        titulo.classList.add("fade");
        texto.classList.add("fade");

        setTimeout(() => {
            // Cambiar √≠ndice
            indice = (indice + 1) % mensajes.length;

            // Cambiar contenido
            titulo.textContent = mensajes[indice].h1;
            texto.textContent = mensajes[indice].p;

            // Forzar repaint (clave para que la transici√≥n vuelva a correr)
            void titulo.offsetWidth;

            // Aparecer
            titulo.classList.remove("fade");
            texto.classList.remove("fade");

        }, 1000); // debe coincidir con tu transition CSS
    }, 7000); // intervalo total
});
</script>




    
{% endblock %} 